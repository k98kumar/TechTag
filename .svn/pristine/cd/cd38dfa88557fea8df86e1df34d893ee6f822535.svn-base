package com.example.kash.techtag;

import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import com.google.firebase.database.FirebaseDatabase;

public class CreateJoin extends BaseActivity implements View.OnClickListener {

    String createOrJoin = "";
    String groupName;

    String currentUserEmail;

    boolean isCreate = false;

    EditText nameInput;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_create_join);

        mDatabase.child("test").push().setValue("string");

        // Get the email of the user from previous activity
        currentUserEmail = getIntent().getStringExtra("EMAIL");

        final Button selectButton = (Button) findViewById(R.id.selectButtonCreateJoin);
        final TextView createView = (TextView) findViewById(R.id.createLabel);
        final TextView joinView = (TextView) findViewById(R.id.joinLabel);
        final TextView mStatusOutput = (TextView) findViewById(R.id.statusOutputCreateJoin);
        nameInput = (EditText) findViewById(R.id.createJoinInput);

        mStatusOutput.setText("");

        nameInput.setFocusable(false);
        nameInput.setFocusable(true);
        nameInput.setFocusableInTouchMode(true);
        nameInput.setHintTextColor(Color.parseColor("#999999"));
        nameInput.setTextColor(Color.parseColor("#FFFFFF"));

        createView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                createView.setBackground(getDrawable(R.color.loginBlue));
                createView.setTextColor(Color.parseColor("#FFFFFF"));
                joinView.setBackground(getDrawable(R.color.white));
                joinView.setTextColor(Color.parseColor("#000000"));
                nameInput.setFocusable(false);
                nameInput.setFocusable(true);
                nameInput.setFocusableInTouchMode(true);
                nameInput.setTextColor(Color.parseColor("#000000"));
                createOrJoin = "create";
            }
        });

        joinView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                joinView.setBackground(getDrawable(R.color.loginBlue));
                joinView.setTextColor(Color.parseColor("#FFFFFF"));
                createView.setBackground(getDrawable(R.color.white));
                createView.setTextColor(Color.parseColor("#000000"));
                nameInput.setFocusable(false);
                nameInput.setFocusable(true);
                nameInput.setFocusableInTouchMode(true);
                nameInput.setTextColor(Color.parseColor("#FFFFFF"));
                createOrJoin = "join";
            }
        });

    }

    /**
     * Create a helper function that returns a boolean
     * indicating whether the database contains the
     * code of the group trying to be created or joined
     * @return boolean stating if database already contains group name
     */
    public boolean inDatabase(String possibleCode) {
        return true;
    }

    @Override
    public void onClick(View v) {
        // Intent mIntent = new Intent(CreateJoin.this, ListPlayers.class);
        int i = v.getId();
        if (i == R.id.selectButtonCreateJoin) {
            switch (createOrJoin) {
                case "create" :
                    Intent mCreateIntent = new Intent(CreateJoin.this, ListPlayers.class);
                    mCreateIntent.putExtra("CREATE_OR_JOIN", isCreate);
                    break;
                case "join" :
                    if (nameInput.toString().equals("")) { // Rewrite what it equals
                        Intent mJoinIntent = new Intent(CreateJoin.this, ListPlayers.class);
                        startActivity(mJoinIntent);
                    }
                    break;
                default :
                    break;
            }
        }
        if (i == R.id.button2) {
            Intent tempIntent = new Intent(CreateJoin.this, MapLocations.class);
            Log.d("Intent", "received");
            startActivity(tempIntent);
        }
    }

}
